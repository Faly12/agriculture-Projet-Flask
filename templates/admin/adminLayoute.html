<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Accueil - Agriculture Shop</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
</head>
<body>

<!-- Bouton toggle menu mobile -->
<button id="menuToggle" class="btn btn-primary m-2 d-md-none" onclick="toggleSidebar()">
  <i class="bi bi-list text-dark"></i> Menu
</button>

<!-- Sidebar -->
<nav id="sidebar" class="hidden" aria-label="Menu Administration">
  <div class="text-center mb-4 p-3 border-bottom">
    <img src="{{ url_for('static', filename='uploads/logo.png') }}" class="rounded-circle" width="80">
    <h4 class="mt-2">{{ session['user_name'] }}</h4>
    {% if role == "admin" %}
      <p>Bienvenue, <strong>{{ username }}</strong></p>
    {% endif %}
  </div>
  <ul class="nav flex-column px-2">
    <li class="nav-item"><a class="nav-link" href="/admin"><i class="bi bi-house-door me-2"></i>Accueil</a></li>
    <li class="nav-item"><a class="nav-link" href="/produits"><i class="bi bi-cart-check me-2"></i>Commandes</a></li>
    <li class="nav-item"><a class="nav-link" href="/roles"><i class="bi bi-people me-2"></i>Gestion rôles</a></li>
    <li class="nav-item"><a class="nav-link" href="/dashboard"><i class="bi bi-boxes me-2"></i>Dashboard</a></li>
    
    <li class="nav-item dropdown">
      <a class="nav-link dropdown-toggle" href="#" id="settingsDropdown" role="button" data-bs-toggle="dropdown">
        <i class="bi bi-gear me-2"></i>Paramètres
      </a>
      <ul class="dropdown-menu">
        <li><a class="dropdown-item" href="#" onclick="toggleDarkMode()"><i class="bi bi-moon me-2"></i>Changé le Mode</a></li>
      </ul>
    </li>

    <li class="nav-item"><a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#publicationModal"><i class="bi bi-receipt me-2"></i>Publication</a></li>
    <li><a class="nav-link" href="/profile"><i class="bi bi-person-circle me-2"></i>Profil</a></li>

    <li class="nav-item dropdown">
      <a class="nav-link dropdown-toggle" href="#" id="rapportsDropdown" role="button" data-bs-toggle="dropdown">
        <i class="bi bi-graph-up me-2"></i>Rapports
      </a>
      <ul class="dropdown-menu">
        <li><a class="dropdown-item" href="/users"><i class="bi bi-person me-2"></i>Users</a></li>
        <li><a class="dropdown-item" href="/stocke"><i class="bi bi-clipboard-data me-2"></i>Stock</a></li>
      </ul>
    </li>

    <li><a class="nav-link" href="/"><i class="bi bi-box-arrow-right me-2"></i>Déconnexion</a></li>
  </ul>
</nav>

<!-- Contenu principal -->
<main id="main-content" class="p-4">
  {% block content %}
    <!-- block main -->
  {% endblock %}
</main>

<!-- Footer -->
<footer class="footer text-center py-3 text-dark mt-auto">
  &copy; {{ current_year or 2025 }} Agriculture Shop. Tous droits réservés.
</footer>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{ url_for('static', filename='js/admin.js') }}"></script>
</body>
</html>
